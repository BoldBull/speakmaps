<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Speak to Maps ‚Äì Say an Address, Open Google Maps</title>

  <meta name="description" content="Say an address out loud and open it instantly in Google Maps. Works on Android, iPhone, and desktop browsers ‚Äî no app download needed." />
  <meta name="keywords" content="voice to maps, speak address, open address google maps, voice navigation, google maps shortcut, voice directions" />

  <!-- Social preview (OG tags) -->
  <meta property="og:title" content="Speak to Maps ‚Äì Say It, Open It" />
  <meta property="og:description" content="Say an address out loud and open it instantly in Google Maps. Works on any device." />
  <meta property="og:url" content="https://boldbull.github.io/speakmaps/" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://boldbull.github.io/speakmaps/icon-512.png" />
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:title" content="Speak to Maps ‚Äì Say It, Open It" />
  <meta property="twitter:description" content="Say an address out loud and open it instantly in Google Maps. Works on any device." />

  <!-- Optional PWA manifest (doesn't change SEO) -->
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="theme-color" content="#111">

  <!-- Structured data for Google -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Speak to Maps",
    "url": "https://boldbull.github.io/speakmaps/",
    "applicationCategory": "UtilityApplication",
    "operatingSystem": "Android, iOS, Web",
    "description": "Say an address and open it instantly in Google Maps using voice recognition."
  }
  </script>

  <!-- Your styles (keep these as-is) -->
  <style>
    body{font-family:system-ui,Segoe UI,Arial;margin:0;display:grid;place-items:center;min-height:100svh;background:#111;color:#fff}
    .card{width:min(720px,92%);background:#1b1b1b;border-radius:18px;padding:24px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    button{font-size:18px;padding:14px 18px;border-radius:12px;border:0;cursor:pointer}
    .go{background:#4ade80} .stop{background:#f87171}
    .hint{opacity:.8;margin:.5rem 0 0}
    input{width:100%;padding:12px 14px;border-radius:10px;border:1px solid #333;background:#0f0f0f;color:#fff;margin:12px 0}
  </style>
</head>

<body>
  <div class="card">
    <h1>Speak an address ‚Üí open in Maps</h1>
    <button id="btn" class="go">üé§ Start Listening</button>
    <p class="hint">Say: <em>‚Äú123 Main Street, Elkhart Indiana‚Äù</em> or ‚Äúnavigate to Walmart Goshen‚Äù.</p>
    <input id="text" placeholder="‚Ä¶or type an address and press Enter" />
    <p id="status"></p>
  </div>

  <script>
    // Helpers
    const $ = id => document.getElementById(id);
    const status = msg => { $("status").textContent = msg || ""; };

    // Decide best URI for the device
    function mapsURLFromQuery(q) {
      const query = encodeURIComponent(q);
      const ua = navigator.userAgent.toLowerCase();
      const isIOS = /iphone|ipad|ipod/.test(ua);
      const isAndroid = /android/.test(ua);

      // Try native app first on mobile, fall back to web if it fails
      if (isAndroid) return `geo:0,0?q=${query}`;         // Android Maps app
      if (isIOS)     return `http://maps.apple.com/?q=${query}`; // iOS Apple Maps (fastest)
      // Desktop or unknown ‚Üí Google Maps web
      return `https://www.google.com/maps/search/?api=1&query=${query}`;
    }

    function openMaps(q) {
      if (!q) return status("Heard nothing‚Äîtry again.");
      status(`Opening: ${q}`);
      // Open in same tab to avoid popup blockers
      location.href = mapsURLFromQuery(q);
    }

    // Typed input support
    $("text").addEventListener("keydown", e => {
      if (e.key === "Enter") openMaps(e.target.value.trim());
    });

    // Speech recognition (Chrome/Edge/Android best)
    const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
    let rec, listening = false;

    if (SR) {
      rec = new SR();
      rec.lang = "en-US";
      rec.interimResults = false;      // final text only
      rec.maxAlternatives = 1;

      rec.onresult = e => {
        const transcript = e.results?.[0]?.[0]?.transcript || "";
        openMaps(transcript.replace(/^navigate to/i, "").trim());
      };
      rec.onerror = e => status(`Mic error: ${e.error}`);
      rec.onend = () => { listening = false; btn.className = "go"; btn.textContent = "üé§ Start Listening"; };
    } else {
      status("Speech recognition not supported here. Type the address instead.");
    }

    const btn = $("btn");
    btn.onclick = () => {
      if (!rec) return status("Speech recognition not supported in this browser.");
      if (!listening) {
        listening = true;
        btn.className = "stop";
        btn.textContent = "üõë Stop";
        status("Listening‚Ä¶");
        try { rec.start(); } catch {}
      } else {
        rec.stop();
      }
    };
  </script>
</body>
</html>

